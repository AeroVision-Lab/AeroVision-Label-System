# AeroVision Label System - AI Configuration

# Model paths (can be absolute or relative paths)
models:
  aircraft:
    path: /app/models/yolo-cls-aircraft.pt
    device: cuda  # cuda 或 cpu
    image_size: 640
  airline:
    path: /app/models/yolo-cls-airline.pt
    device: cuda  # cuda 或 cpu
    image_size: 640
  detection:
    path: /app/models/yolo-det.pt
    device: cuda  # cuda 或 cpu
    image_size: 640
    conf_threshold: 0.25  # 置信度阈值
    iou_threshold: 0.45   # NMS IOU阈值

# OCR configuration
ocr:
  enabled: true
  lang: en
  use_angle_cls: true
  use_gpu: true  # PaddleOCR GPU 开关

# Quality assessment configuration (CV-based algorithm)
quality:
  sharpness_weight: 0.3
  exposure_weight: 0.2
  composition_weight: 0.15
  noise_weight: 0.2
  color_weight: 0.15
  pass_threshold: 0.6

# Confidence thresholds
thresholds:
  high_confidence: 0.95      # >= 95% 高置信度（仅用于统计，不自动批准）
  low_confidence: 0.80       # < 80% confidence: must review

# HDBSCAN configuration for new class detection
hdbscan:
  enabled: true
  min_cluster_size: 5
  min_samples: 3
  metric: "euclidean"
  cluster_selection_method: "eom"
  prediction_data: true

# Auto-annotation settings
auto_annotate:
  enabled: true
  auto_trigger: true         # Automatically run AI prediction on startup
  batch_size: 32
  num_workers: 4

# Review settings
review:
  push_order: "confidence_desc"
  auto_approve_threshold: 1.1  # 设置为 >1 禁用自动批准，所有图片必须人工审核

# Performance settings
performance:
  # CPU 线程数限制（仅 CPU 推理时生效）
  cpu_threads: 4
  # 批量推理大小
  batch_size: 16
  # 是否在启动时预加载模型
  preload_models: true
